import{Q as M}from"./QSpinnerPie.7f041fe1.js";import{i as A,h as q}from"./QItem.87f7eb07.js";import{Q}from"./QPagination.5f7621cf.js";import{d as v,_ as w,o as a,c as d,w as o,f as s,a8 as n,e as i,aa as h,a9 as p,al as E,a6 as l,am as P,an as $,ab as b,aV as N,Q as I,a7 as _,p as F,i as V,a as S,ao as y}from"./index.650196fd.js";import{c as u,H as x,Q as z}from"./HeaderActions.f25c2299.js";import{Q as B}from"./BtnAction.b0c7cc86.js";import{Q as L}from"./QChip.f7831cda.js";import{Q as O}from"./QPageSticky.8fb09a8d.js";import{Q as D}from"./QCard.9e15fa18.js";import"./QInput.d6ff27b1.js";const j=v({name:"ItemCard",props:{cardTitle:{type:String,default:"",required:!1},isReported:{type:Boolean,required:!1,default:null},status:{type:Object,required:!1,default:null},index:{type:Number},id:{type:[Number,String]},cardImg:{type:String,required:!1,default:""},cardLabels:{type:Array,required:!1,default:()=>[]},cardDate:{type:String,required:!1,default:""},cardAction:{type:Function,required:!1},cartAction:{type:Function,required:!1}}}),G=e=>(F("data-v-7dcaf208"),e=e(),V(),e),U={class:"row flex align-center"},H={class:"card-title col"},J=G(()=>i("div",{style:{"font-size":"21px"}}," $ 12,500.00 ",-1));function R(e,t,m,C,T,k){return a(),d(D,{class:"my-card-store cursor-pointer non-selectable border-rounded q-pa-none",onClick:t[1]||(t[1]=r=>e.cardAction(e.id)),style:{position:"relative"}},{default:o(()=>[s(u,{class:"q-pa-none"},{default:o(()=>[e.cardImg?(a(),d(A,{key:0,class:"q-mr-sm img-style",src:e.cardImg},null,8,["src"])):n("",!0)]),_:1}),s(u,{class:"q-py-md q-pr-sm"},{default:o(()=>[i("div",U,[i("div",H,h(e.cardTitle),1),e.status?(a(),d(B,{key:0,delay:100,"transition-show":"scale","transition-hide":"scale",class:"border-rounded tooltip-container"},{default:o(()=>[p(h(e.status.tooltip),1)]),_:1})):n("",!0),e.status?(a(),d(L,{key:1,class:"border-rounded",style:E(`color: ${e.status.color}; background-color: ${e.status.color}26; font-size: 9px`),label:e.status.label},null,8,["style","label"])):n("",!0)])]),_:1}),s(u,{class:"q-px-md",horizontal:""},{default:o(()=>[e.cardLabels.length>0?(a(),d(u,{key:0,class:"q-pa-none ellipsis w-100"},{default:o(()=>[(a(!0),l($,null,P(e.cardLabels,(r,g)=>(a(),l("div",{key:g,class:"row justify-between"},[r.label?(a(),l("div",{key:0,class:_(["q-pb-xs col-12",r.info===void 0?"card-text":"card-typography"])},h(r.label),3)):n("",!0),r.info?(a(),l("div",{key:1,class:_(["col-12 card-text q-pb-xs",r.label===null?"col-12":""])},h(r.info),3)):n("",!0)]))),128))]),_:1})):n("",!0)]),_:1}),s(u,null,{default:o(()=>[J]),_:1}),s(O,{style:{position:"absolute"},offset:[10,10]},{default:o(()=>[s(b,{fab:"",onClick:t[0]||(t[0]=N(r=>e.cartAction(e.$props),["stop"])),padding:"8px",color:"accent",unelevated:""},{default:o(()=>[s(I,{name:"o_add_shopping_cart",size:"xs",color:"primary"})]),_:1})]),_:1})]),_:1})}var K=w(j,[["render",R],["__scopeId","data-v-7dcaf208"]]);const W=v({name:"EquipmentsPage",components:{HeaderActions:x,ItemCardStore:K},data(){return{delaySearch:300,searchModel:null,showCards:!0,timeoutSearch:null,loading:!0,selectedFilterText:"category",cartList:[],localPagination:{totalPages:1,descending:!1,rowsPerPage:12,page:1},params:{category:""},btnAction:{show:!1,btnTitle:"Agregar equipo",iconName:"o_data_saver_on",tooltip:"Agregar nuevo equipo",to:"add-equipment"},btnBuyNow:{show:!0,btnTitle:"Comprar ahora",iconName:"buy",tooltip:"Comprar ahora mismo",btnAction:this.updatePassword,loader:!1},inputSearch:{show:!0,inputLabel:"Categor\xEDa del equipo",setSelectedFilter:this.setSelectedFilter,setSelectedOptionFilter:this.setSelectedOptionFilter,heightModal:150,items:[{title:"Categor\xEDa del equipo",filter:"category",icon:"o_badge"},{title:"Modelo",filter:"model",icon:"o_alt_route"},{title:"Marca",filter:"brand",icon:"o_sell"}]}}},created(){this.getEquipments({})},watch:{searchModel(e){this.params[this.selectedFilterText]=e,clearTimeout(this.timeoutSearch),this.timeoutSearch=setTimeout(()=>{this.params.page=1,this.getEquipments(this.params)},this.delaySearch)},selectedFilterText(){this.params.page=1}},computed:{equipments(){return console.log(this.$store.getters["storeModule/getEquipmentsGetter"]),this.$store.getters["storeModule/getEquipmentsGetter"].map(t=>({id:t.IdEquipment,cardTitle:t.categoryName,cardImg:t.photo,cardLabels:[{label:"Modelo",info:t.equipmentModel},{label:"Marca",info:"MARCA"}],status:"onSale",cartAction:this.addToCart}))},pagination:{get(){return this.$store.getters["equipments/getPaginationGetter"]}}},methods:{async getEquipments(e){this.loading=!0,await this.$store.dispatch("storeModule/getEquipmentsAction",e),this.localPagination=JSON.parse(JSON.stringify(this.pagination)),this.loading=!1},async getEquipment(e){await this.$store.dispatch("storeModule/getEquipmentAction",{id:e})},addToCart(e){console.log(e),this.cartList.push(e)},setSelectedOptionFilter(e,t=null){e.length&&e.forEach(m=>{this.params[m.filter]=m.value}),t&&delete this.params[t],this.params.page=1,this.getEquipments(this.params)},setSelectedFilter(e){this.selectedFilterText&&(delete this.params[this.selectedFilterText],this.searchModel&&this.getEquipments(this.params)),this.selectedFilterText=e.filter,this.inputSearch.inputLabel=e.title,e.value&&e.filter&&(this.params[e.filter]=this.searchModel,this.getEquipments(this.params))},goToDetails(e){this.$router.push({name:"detail-equipment",params:{id:e}})},goToEdit(e){this.$router.push({name:"edit-equipment",params:{id:e}})},changePagination(e){this.localPagination.page=e,this.params={...this.params,page:this.localPagination.page,rowsPerPage:this.localPagination.rowsPerPage},this.getEquipments(this.params)}}}),X={class:"card-page"},Y={class:"main-container-page q-pa-sm card-color main-container-page-dark row"},Z={class:"col-12 col-sm-9"},ee={style:{"max-width":"100%"}},te={key:0,class:"row container-cards"},ae={key:1,class:"q-ma-md q-ma-sm-xl q-pa-xl text-center no-info border-rounded"},se=i("div",{class:"text-primary q-ma-lg"},"Cargando equipos",-1),oe={key:2,class:"q-ma-md q-ma-sm-xl q-pa-xl text-center no-info border-rounded"},ie=i("strong",{class:"text-negative"},"!",-1),re={key:0,style:{height:"6.55%"},class:"row justify-center q-pt-sm"},le={class:"col-12 col-sm-3"},ne={class:"w-100 q-pa-lg"},de=i("div",{class:"q-mb-sm bg-accent border-rounded q-pa-sm q-mb-md"},[i("div",null,[p(" Subtotal del carrito: "),i("span",{style:{"font-size":"21px"}}," $230,512.17 ")])],-1);function ce(e,t,m,C,T,k){const r=S("header-actions"),g=S("item-card-store");return a(),d(z,{class:"flex flex-center cursor-pointer non-selectable"},{default:o(()=>[i("div",X,[s(r,{titlePage:"Consumibles y equipos biom\xE9dicos",btnAction:e.btnAction,inputSearch:e.inputSearch,searchModel:e.searchModel,"onUpdate:searchModel":t[0]||(t[0]=c=>e.searchModel=c)},null,8,["btnAction","inputSearch","searchModel"]),i("div",Y,[i("div",Z,[s(q,{class:"fit",style:{height:"93% !important"},"thumb-style":e.$store.getters["global/getThumbStyle"]},{default:o(()=>[i("div",ee,[e.equipments&&e.equipments.length>0?(a(),l("div",te,[(a(!0),l($,null,P(e.equipments,(c,f)=>(a(),l("div",{class:"col-xs-12 col-sm-auto col-md-auto col-lg-auto col-xl-auto",key:f},[s(g,y(c,{status:f%2===0?{tooltip:"Tiene reporte(s) sin atender",color:"#10D13A",label:"En oferta"}:null,index:f,"card-action":e.goToDetails}),null,16,["status","index","card-action"])]))),128))])):e.loading?(a(),l("div",ae,[s(M,{color:"primary",class:"q-mt-lg",size:"4em"}),se])):e.loading===!1?(a(),l("div",oe,[p(" No hay equipos para mostrar "),ie])):n("",!0)])]),_:1},8,["thumb-style"]),e.equipments.length>0?(a(),l("div",re,[s(Q,{modelValue:e.localPagination.page,"onUpdate:modelValue":[t[1]||(t[1]=c=>e.localPagination.page=c),e.changePagination],dense:"",class:"q-mt-none pagination-style",max:e.localPagination.totalPages,size:"md","direction-links":""},null,8,["modelValue","max","onUpdate:modelValue"])])):n("",!0)]),i("div",le,[s(q,{class:"fit",style:{height:"93% !important"},"thumb-style":e.$store.getters["global/getThumbStyle"]},{default:o(()=>[i("div",ne,[de,s(b,y({class:"form__button border-rounded text-blue-7 text-weight-medium w-100 q-mb-md","no-caps":"",outline:""},e.btnBuyNow),{default:o(()=>[p(" Ver carrito ")]),_:1},16),s(b,y({class:"form__button border-rounded bg-blue-7 text-weight-medium w-100","no-caps":""},e.btnBuyNow),{default:o(()=>[p(" Proceder al pago ")]),_:1},16)])]),_:1},8,["thumb-style"])])])])]),_:1})}var Se=w(W,[["render",ce]]);export{Se as default};

import{_ as v,a as E,b as L,c as y,d as F,e as k,f as Q,g as w,h as $,i as S,j as V,k as A,l as B,m as I,n as U,o as N,p as P,q as T,r as R,s as D,t as j,u as W,v as z}from"./warning.551030d0.js";import{_ as H}from"./bms.bfdce8d2.js";import{_ as G,d as K,aW as M,s as J,a as g,o as r,c as m,w as t,e as o,f as s,a6 as _,am as O,an as X,a9 as d,ab as Y,aa as c,n as b,h,aK as Z,a8 as ee}from"./index.650196fd.js";import{j as se,h as te,e as u,f as ae,d as f}from"./QItem.87f7eb07.js";import{H as oe,Q as le,c as q,b as ne}from"./HeaderActions.f25c2299.js";import{Q as ie}from"./QForm.85481701.js";import{Q as re}from"./QCardActions.a748bd9b.js";import{Q as de}from"./QCard.9e15fa18.js";import{B as ce}from"./BtnAction.b0c7cc86.js";import"./QInput.d6ff27b1.js";const ue=K({name:"SettingsPage",components:{HeaderActions:oe,BtnAction:ce},data(){return{modalLoadEquipments:!1,disabledUplaodFile:!0,excelFile:null,btnCancel:{show:!0,btnTitle:"Cancelar",iconName:"close",btnWidth:"auto",tooltip:"Cancelar y cerrar",btnAction:this.closeLoadEquipments},btnLoadEquipments:{show:!0,loader:!1,disabled:!0,btnTitle:"Cargar equipos",iconName:"o_upload",btnWidth:"auto",tooltip:"Cargar equipos desde fuente de datos excel",btnAction:this.loadEquipmentsToDB},columns:[{name:"Columna1",label:"Columna 1"},{name:"Columna2",label:"Columna 2"},{name:"Columna3",label:"Columna 3"}],tableData:[{Columna1:"Valor1",Columna2:"Valor2",Columna3:"Valor3"},{Columna1:"Valor4",Columna2:"Valor5",Columna3:"Valor6"}],listSettings:[{title:"Mi cuenta",subtitle:"Detalles de mi cuenta",img:"account.png",link:{route:"edit-user",params:0}},{title:"Usuarios",subtitle:"Lista de usuarios en el sistema",img:"users.png",link:"users"},{title:"Cargar equipos desde un archivo excel",subtitle:"Te permite agregar varios regsitros desde una fuente de datos local (.xlsx)",img:"excel.png",action:this.openLoadEquipments},{title:"Roles y permisos",subtitle:"Accesos y permisos din\xE1micos dentro del sistema",img:"role.png",link:"roles"},{title:"Tema principal",subtitle:"Color de \xE9nfasis, color de tema",img:"color.png",link:"colors"},{title:"Acerca de nosotros",subtitle:"Informaci\xF3n y contacto",img:"about.png",link:"about-us"}]}},setup(){return{getImageUrl:n=>{try{return new URL({"../../assets/png/about.png":v,"../../assets/png/account 2.png":E,"../../assets/png/account.png":L,"../../assets/png/admin.png":y,"../../assets/png/bms.png":H,"../../assets/png/calendar.png":F,"../../assets/png/color.png":k,"../../assets/png/dark.png":Q,"../../assets/png/excel.png":w,"../../assets/png/hospital.png":$,"../../assets/png/laptop.png":S,"../../assets/png/light.png":V,"../../assets/png/maintenances.png":A,"../../assets/png/messages.png":B,"../../assets/png/monitor.png":I,"../../assets/png/notification.png":U,"../../assets/png/reports.png":N,"../../assets/png/role.png":P,"../../assets/png/success.png":T,"../../assets/png/tecnical.png":R,"../../assets/png/user.png":D,"../../assets/png/users 2.png":j,"../../assets/png/users.png":W,"../../assets/png/warning.png":z}[`../../assets/png/${n}`],self.location).href}catch{}},getExcel:()=>{try{return new URL("/assets/juan.8fdfca74.xlsx",self.location).href}catch(n){console.log(n)}},basicToolBar:[["unordered","ordered"]]}},methods:{openLoadEquipments(){this.modalLoadEquipments=!0},uploadFile(e){const l=e.target.files[0];try{l!==void 0&&(this.excelFile={name:l.name,file:l},console.log("Este es el file que quiero subir",this.excelFile))}catch{}},clearFileInput(e){try{e.value=null,this.excelFile.name="",this.excelFile.file={},this.ImageBase64=null}catch{}e.value&&e.parentNode.replaceChild(e.cloneNode(!0),e)},closeLoadEquipments(){this.excelFile=null,this.modalLoadEquipments=!1},async loadEquipmentsToDB(){this.btnLoadEquipments.loader=!0,this.btnCancel.disabled=!0;try{await this.$store.dispatch("equipments/postEquipmentsFromExcelAction",this.excelFile)===!0?(M(this.$q,{title:"\xC9xito al cargar los equipos",msg:"Los equipos se agregaron a la base de datos"}),this.$router.go(-1)):J(this.$q,{msg:"Int\xE9ntalo de nuevo m\xE1s tarde y si el error persiste, rep\xF3rtalo"}),this.btnLoadEquipments.loader=!1,this.btnCancel.disabled=!1}catch{this.btnLoadEquipments.loader=!1,this.btnCancel.disabled=!1}},navigateTo(e){e.params||e.params===0?this.$router.push({name:e.route,params:{id:e.params}}):this.$router.push({path:e})},checkPermissions(){switch(this.userRole){case 3:this.listSettings[1].hide=!0,this.listSettings[2].hide=!0,this.listSettings[3].hide=!0;break;case 2:this.listSettings[1].hide=!0,this.listSettings[2].hide=!0;break}}},created(){this.checkPermissions()},watch:{excelFile:{handler(e){e!=null&&e.name?this.btnLoadEquipments.disabled=!1:this.btnLoadEquipments.disabled=!0},deep:!0}},computed:{userRole:{get(){return this.$store.getters["users/getRoleGetter"]}}}}),pe={class:"card-page"},ge={class:"main-container-page container-form"},me={class:"row"},_e={class:"col-12"},be=["onClick"],he=["src"],fe=o("div",{class:"title-page text-primary"},"Agregar equipos desde archivo excel",-1),qe={class:"setting-item__title"},Ce={class:"setting-item__subtitle"},xe=["href"],ve=o("li",{class:"setting-item__subtitle"}," No modificar las columnas ",-1),Ee=o("li",{class:"setting-item__subtitle"}," La fecha debe estar en formato dia/mes/a\xF1o ejp. 12/01/2023 ",-1),Le=o("li",{class:"setting-item__subtitle"}," No subir registros con n\xFAmero de serie duplicados ",-1),ye=o("li",{class:"setting-item__subtitle"}," Los datos no deben ser calculados o referenciados a casillas externas ",-1);function Fe(e,l,n,C,ke,Qe){const x=g("header-actions"),p=g("btn-action");return r(),m(le,{class:"flex flex-center cursor-pointer non-selectable"},{default:t(()=>[o("div",pe,[s(x,{titlePage:"Configuraci\xF3n"}),o("div",ge,[s(te,{class:"fit h-100","thumb-style":{right:"1px",borderRadius:"5px",background:"rgba(29, 100, 231, 0.2)",width:"5px",opacity:1}},{default:t(()=>[o("div",me,[o("div",_e,[s(se,null,{default:t(()=>[(r(!0),_(X,null,O(e.listSettings,(a,i)=>(r(),_("div",{onClick:we=>a.action?a.action():e.navigateTo(a.link),key:i},[a.hide?ee("",!0):(r(),m(ae,{key:0,class:"q-mb-sm setting-item border-rounded flex items-center"},{default:t(()=>[s(u,{avatar:""},{default:t(()=>[s(Z,{class:"avatar-item border-rounded"},{default:t(()=>[o("img",{src:e.getImageUrl(a.img)},null,8,he)]),_:2},1024)]),_:2},1024),s(u,null,{default:t(()=>[s(f,{class:"setting-item__title"},{default:t(()=>[d(c(a.title),1)]),_:2},1024),s(f,{class:"setting-item__subtitle",caption:""},{default:t(()=>[d(c(a.subtitle),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))],8,be))),128))]),_:1})])])]),_:1},8,["thumb-style"])])]),s(ne,{modelValue:e.modalLoadEquipments,"onUpdate:modelValue":l[2]||(l[2]=a=>e.modalLoadEquipments=a),persistent:""},{default:t(()=>[s(de,{class:"border-shadow q-px-sm border-rounded modal-ios"},{default:t(()=>[s(q,null,{default:t(()=>[fe]),_:1}),s(q,{class:"q-pt-none"},{default:t(()=>[s(ie,null,{default:t(()=>[s(u,null,{default:t(()=>[o("div",qe,[d(" Para que la operaci\xF3n sea \xE9xitosa toma en cuenta que: "),o("ol",null,[o("li",Ce,[o("a",{class:"text-blue-6",download:"plantilla.xlsx",href:e.getExcel()}," Descargar plantilla ",8,xe)]),ve,Ee,Le,ye])])]),_:1}),o("input",{style:{display:"none"},ref:"fileUpload",type:"file",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:l[0]||(l[0]=a=>e.uploadFile(a))},null,544),s(Y,{unelevated:"","no-caps":"",class:"border-rounded q-my-sm",size:"sm",color:"blue-7",onClick:l[1]||(l[1]=a=>{var i;return(i=e.excelFile)!=null&&i.name?e.clearFileInput(e.$refs.fileUpload):e.$refs.fileUpload.click()})},{default:t(()=>{var a;return[d(c((a=e.excelFile)!=null&&a.name?e.excelFile.name:"Cargar archivo de excel"),1)]}),_:1})]),_:1})]),_:1}),s(re,{align:"right",class:"q-pa-md q-pb-lg"},{default:t(()=>[s(p,b(h(e.btnCancel)),null,16),s(p,b(h(e.btnLoadEquipments)),null,16)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Re=G(ue,[["render",Fe]]);export{Re as default};

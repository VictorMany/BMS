import{Q as qe}from"./QInput.d6ff27b1.js";import{L as Re,k as J,A as je,x as Y,q as xe,F as q,v as Xe,C as Ge,J as Ue,H as Je,Q as ue,B as Me,ad as Ze,aI as et,z as Pe,_ as tt,d as nt,r as at,aW as Se,s as se,a as _e,o as V,c as be,w as E,f as _,e as w,a8 as le,a6 as ce,ao as rt,a7 as it,a9 as ot,aa as ye,am as st,an as lt,aK as ct,p as ut,i as dt}from"./index.650196fd.js";import{Q as Ne,G as ft}from"./GeneralTable.329fea1a.js";import{e as mt,H as ht,Q as gt}from"./HeaderActions.f25c2299.js";import{u as bt,b as yt}from"./BtnAction.b0c7cc86.js";import{h as wt,f as kt,e as vt,d as pt}from"./QItem.87f7eb07.js";import{Q as Dt}from"./use-fullscreen.0a2c208b.js";import{Q as Te}from"./QDate.8a7cc956.js";import{Q as qt}from"./QEditor.0b50cedd.js";import{Q as xt}from"./QForm.85481701.js";import"./QSpinnerPie.7f041fe1.js";import"./QPagination.5f7621cf.js";import"./QChip.f7831cda.js";const Mt=["none","strict","leaf","leaf-filtered"];var Pt=Re({name:"QTree",props:{...bt,nodes:{type:Array,required:!0},nodeKey:{type:String,required:!0},labelKey:{type:String,default:"label"},childrenKey:{type:String,default:"children"},dense:Boolean,color:String,controlColor:String,textColor:String,selectedColor:String,icon:String,tickStrategy:{type:String,default:"none",validator:e=>Mt.includes(e)},ticked:Array,expanded:Array,selected:{},noSelectionUnset:Boolean,defaultExpandAll:Boolean,accordion:Boolean,filter:String,filterMethod:Function,duration:Number,noConnectors:Boolean,noTransition:Boolean,noNodesLabel:String,noResultsLabel:String},emits:["update:expanded","update:ticked","update:selected","lazyLoad","afterShow","afterHide"],setup(e,{slots:t,emit:n}){const{proxy:a}=Xe(),{$q:r}=a,s=yt(e,r),f=J({}),h=J(e.ticked||[]),d=J(e.expanded||[]);let u={};je(()=>{u={}});const k=Y(()=>`q-tree q-tree--${e.dense===!0?"dense":"standard"}`+(e.noConnectors===!0?" q-tree--no-connectors":"")+(s.value===!0?" q-tree--dark":"")+(e.color!==void 0?` text-${e.color}`:"")),v=Y(()=>e.selected!==void 0),O=Y(()=>e.icon||r.iconSet.tree.icon),C=Y(()=>e.controlColor||e.color),P=Y(()=>e.textColor!==void 0?` text-${e.textColor}`:""),A=Y(()=>{const o=e.selectedColor||e.color;return o?` text-${o}`:""}),$=Y(()=>e.filterMethod!==void 0?e.filterMethod:(o,l)=>{const i=l.toLowerCase();return o[e.labelKey]&&o[e.labelKey].toLowerCase().indexOf(i)>-1}),x=Y(()=>{const o={},l=(i,m)=>{const c=i.tickStrategy||(m?m.tickStrategy:e.tickStrategy),y=i[e.nodeKey],p=i[e.childrenKey]&&Array.isArray(i[e.childrenKey])&&i[e.childrenKey].length!==0,z=i.disabled!==!0&&v.value===!0&&i.selectable!==!1,S=i.disabled!==!0&&i.expandable!==!1,Ke=c!=="none",oe=c==="strict",pe=c==="leaf-filtered",he=c==="leaf"||c==="leaf-filtered";let ge=i.disabled!==!0&&i.tickable!==!1;he===!0&&ge===!0&&m&&m.tickable!==!0&&(ge=!1);let K=i.lazy;K===!0&&f.value[y]!==void 0&&Array.isArray(i[e.childrenKey])===!0&&(K=f.value[y]);const g={key:y,parent:m,isParent:p,lazy:K,disabled:i.disabled,link:i.disabled!==!0&&(z===!0||S===!0&&(p===!0||K===!0)),children:[],matchesFilter:e.filter?$.value(i,e.filter):!0,selected:y===e.selected&&z===!0,selectable:z,expanded:p===!0?d.value.includes(y):!1,expandable:S,noTick:i.noTick===!0||oe!==!0&&K&&K!=="loaded",tickable:ge,tickStrategy:c,hasTicking:Ke,strictTicking:oe,leafFilteredTicking:pe,leafTicking:he,ticked:oe===!0?h.value.includes(y):p===!0?!1:h.value.includes(y)};if(o[y]=g,p===!0&&(g.children=i[e.childrenKey].map(D=>l(D,g)),e.filter&&(g.matchesFilter!==!0?g.matchesFilter=g.children.some(D=>D.matchesFilter):g.noTick!==!0&&g.disabled!==!0&&g.tickable===!0&&pe===!0&&g.children.every(D=>D.matchesFilter!==!0||D.noTick===!0||D.tickable!==!0)===!0&&(g.tickable=!1)),g.matchesFilter===!0&&(g.noTick!==!0&&oe!==!0&&g.children.every(D=>D.noTick)===!0&&(g.noTick=!0),he))){if(g.ticked=!1,g.indeterminate=g.children.some(D=>D.indeterminate===!0),g.tickable=g.tickable===!0&&g.children.some(D=>D.tickable),g.indeterminate!==!0){const D=g.children.reduce((De,He)=>He.ticked===!0?De+1:De,0);D===g.children.length?g.ticked=!0:D>0&&(g.indeterminate=!0)}g.indeterminate===!0&&(g.indeterminateNextState=g.children.every(D=>D.tickable!==!0||D.ticked!==!0))}return g};return e.nodes.forEach(i=>l(i,null)),o});xe(()=>e.ticked,o=>{h.value=o}),xe(()=>e.expanded,o=>{d.value=o});function Q(o){const l=[].reduce,i=(m,c)=>{if(m||!c)return m;if(Array.isArray(c)===!0)return l.call(Object(c),i,m);if(c[e.nodeKey]===o)return c;if(c[e.childrenKey])return i(null,c[e.childrenKey])};return i(null,e.nodes)}function te(){return h.value.map(o=>Q(o))}function ne(){return d.value.map(o=>Q(o))}function ae(o){return o&&x.value[o]?x.value[o].expanded:!1}function re(){e.expanded!==void 0?n("update:expanded",[]):d.value=[]}function R(){const o=[],l=i=>{i[e.childrenKey]&&i[e.childrenKey].length!==0&&i.expandable!==!1&&i.disabled!==!0&&(o.push(i[e.nodeKey]),i[e.childrenKey].forEach(l))};e.nodes.forEach(l),e.expanded!==void 0?n("update:expanded",o):d.value=o}function B(o,l,i=Q(o),m=x.value[o]){if(m.lazy&&m.lazy!=="loaded"){if(m.lazy==="loading")return;f.value[o]="loading",Array.isArray(i[e.childrenKey])!==!0&&(i[e.childrenKey]=[]),n("lazyLoad",{node:i,key:o,done:c=>{f.value[o]="loaded",i[e.childrenKey]=Array.isArray(c)===!0?c:[],Ge(()=>{const y=x.value[o];y&&y.isParent===!0&&j(o,!0)})},fail:()=>{delete f.value[o],i[e.childrenKey].length===0&&delete i[e.childrenKey]}})}else m.isParent===!0&&m.expandable===!0&&j(o,l)}function j(o,l){let i=d.value;const m=e.expanded!==void 0;if(m===!0&&(i=i.slice()),l){if(e.accordion&&x.value[o]){const c=[];x.value[o].parent?x.value[o].parent.children.forEach(y=>{y.key!==o&&y.expandable===!0&&c.push(y.key)}):e.nodes.forEach(y=>{const p=y[e.nodeKey];p!==o&&c.push(p)}),c.length!==0&&(i=i.filter(y=>c.includes(y)===!1))}i=i.concat([o]).filter((c,y,p)=>p.indexOf(c)===y)}else i=i.filter(c=>c!==o);m===!0?n("update:expanded",i):d.value=i}function ie(o){return o&&x.value[o]?x.value[o].ticked:!1}function L(o,l){let i=h.value;const m=e.ticked!==void 0;m===!0&&(i=i.slice()),l?i=i.concat(o).filter((c,y,p)=>p.indexOf(c)===y):i=i.filter(c=>o.includes(c)===!1),m===!0&&n("update:ticked",i)}function T(o,l,i){const m={tree:a,node:o,key:i,color:e.color,dark:s.value};return Pe(m,"expanded",()=>l.expanded,c=>{c!==l.expanded&&B(i,c)}),Pe(m,"ticked",()=>l.ticked,c=>{c!==l.ticked&&L([i],c)}),m}function M(o){return(e.filter?o.filter(l=>x.value[l[e.nodeKey]].matchesFilter):o).map(l=>Be(l))}function X(o){if(o.icon!==void 0)return q(ue,{class:"q-tree__icon q-mr-sm",name:o.icon,color:o.iconColor});const l=o.img||o.avatar;if(l)return q("img",{class:`q-tree__${o.img?"img":"avatar"} q-mr-sm`,src:l})}function Ve(){n("afterShow")}function Ie(){n("afterHide")}function Be(o){const l=o[e.nodeKey],i=x.value[l],m=o.header&&t[`header-${o.header}`]||t["default-header"],c=i.isParent===!0?M(o[e.childrenKey]):[],y=c.length!==0||i.lazy&&i.lazy!=="loaded";let p=o.body&&t[`body-${o.body}`]||t["default-body"];const z=m!==void 0||p!==void 0?T(o,i,l):null;return p!==void 0&&(p=q("div",{class:"q-tree__node-body relative-position"},[q("div",{class:P.value},[p(z)])])),q("div",{key:l,class:`q-tree__node relative-position q-tree__node--${y===!0?"parent":"child"}`},[q("div",{class:"q-tree__node-header relative-position row no-wrap items-center"+(i.link===!0?" q-tree__node--link q-hoverable q-focusable":"")+(i.selected===!0?" q-tree__node--selected":"")+(i.disabled===!0?" q-tree__node--disabled":""),tabindex:i.link===!0?0:-1,ariaExpanded:c.length>0?i.expanded:null,role:"treeitem",onClick:S=>{ve(o,i,S)},onKeypress(S){Ue(S)!==!0&&(S.keyCode===13?ve(o,i,S,!0):S.keyCode===32&&me(o,i,S,!0))}},[q("div",{class:"q-focus-helper",tabindex:-1,ref:S=>{u[i.key]=S}}),i.lazy==="loading"?q(Je,{class:"q-tree__spinner",color:C.value}):y===!0?q(ue,{class:"q-tree__arrow"+(i.expanded===!0?" q-tree__arrow--rotate":""),name:O.value,onClick(S){me(o,i,S)}}):null,i.hasTicking===!0&&i.noTick!==!0?q(Ne,{class:"q-tree__tickbox",modelValue:i.indeterminate===!0?null:i.ticked,color:C.value,dark:s.value,dense:!0,keepColor:!0,disable:i.tickable!==!0,onKeydown:Me,"onUpdate:modelValue":S=>{ze(i,S)}}):null,q("div",{class:"q-tree__node-header-content col row no-wrap items-center"+(i.selected===!0?A.value:P.value)},[m?m(z):[X(o),q("div",o[e.labelKey])]])]),y===!0?e.noTransition===!0?i.expanded===!0?q("div",{class:"q-tree__node-collapsible"+P.value,key:`${l}__q`},[p,q("div",{class:"q-tree__children"+(i.disabled===!0?" q-tree__node--disabled":""),role:"group"},c)]):null:q(mt,{duration:e.duration,onShow:Ve,onHide:Ie},()=>Ze(q("div",{class:"q-tree__node-collapsible"+P.value,key:`${l}__q`},[p,q("div",{class:"q-tree__children"+(i.disabled===!0?" q-tree__node--disabled":""),role:"group"},c)]),[[et,i.expanded]])):p])}function ke(o){const l=u[o];l&&l.focus()}function ve(o,l,i,m){m!==!0&&l.selectable!==!1&&ke(l.key),v.value&&l.selectable?e.noSelectionUnset===!1?n("update:selected",l.key!==e.selected?l.key:null):l.key!==e.selected&&n("update:selected",l.key===void 0?null:l.key):me(o,l,i,m),typeof o.handler=="function"&&o.handler(o)}function me(o,l,i,m){i!==void 0&&Me(i),m!==!0&&l.selectable!==!1&&ke(l.key),B(l.key,!l.expanded,o,l)}function ze(o,l){if(o.indeterminate===!0&&(l=o.indeterminateNextState),o.strictTicking)L([o.key],l);else if(o.leafTicking){const i=[],m=c=>{c.isParent?(l!==!0&&c.noTick!==!0&&c.tickable===!0&&i.push(c.key),c.leafTicking===!0&&c.children.forEach(m)):c.noTick!==!0&&c.tickable===!0&&(c.leafFilteredTicking!==!0||c.matchesFilter===!0)&&i.push(c.key)};m(o),L(i,l)}}return e.defaultExpandAll===!0&&R(),Object.assign(a,{getNodeByKey:Q,getTickedNodes:te,getExpandedNodes:ne,isExpanded:ae,collapseAll:re,expandAll:R,setExpanded:B,isTicked:ie,setTicked:L}),()=>{const o=M(e.nodes);return q("div",{class:k.value,role:"tree"},o.length===0?e.filter?e.noResultsLabel||r.lang.tree.noResults:e.noNodesLabel||r.lang.tree.noNodes:o)}}});function F(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function W(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function St(e,t){const n=F(e);if(isNaN(t))return W(e,NaN);if(!t)return n;const a=n.getDate(),r=W(e,n.getTime());r.setMonth(n.getMonth()+t+1,0);const s=r.getDate();return a>=s?r:(n.setFullYear(r.getFullYear(),r.getMonth(),a),n)}const Ae=6048e5,_t=864e5;let Tt={};function fe(){return Tt}function Z(e,t){var h,d,u,k,v,O,C,P;const n=fe(),a=(P=(C=(k=(u=t==null?void 0:t.weekStartsOn)!=null?u:(d=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:d.weekStartsOn)!=null?k:n.weekStartsOn)!=null?C:(O=(v=n.locale)==null?void 0:v.options)==null?void 0:O.weekStartsOn)!=null?P:0,r=F(e),s=r.getDay(),f=(s<a?7:0)+s-a;return r.setDate(r.getDate()-f),r.setHours(0,0,0,0),r}function de(e){return Z(e,{weekStartsOn:1})}function $e(e){const t=F(e),n=t.getFullYear(),a=W(e,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const r=de(a),s=W(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const f=de(s);return t.getTime()>=r.getTime()?n+1:t.getTime()>=f.getTime()?n:n-1}function Ce(e){const t=F(e);return t.setHours(0,0,0,0),t}function Oe(e){const t=F(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Ct(e,t){const n=Ce(e),a=Ce(t),r=+n-Oe(n),s=+a-Oe(a);return Math.round((r-s)/_t)}function Ot(e){const t=$e(e),n=W(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),de(n)}function Ft(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Et(e){if(!Ft(e)&&typeof e!="number")return!1;const t=F(e);return!isNaN(Number(t))}function Wt(e){const t=F(e),n=W(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Yt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Nt=(e,t,n)=>{let a;const r=Yt[e];return typeof r=="string"?a=r:t===1?a=r.one:a=r.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function we(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const At={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$t={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Qt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Lt={date:we({formats:At,defaultWidth:"full"}),time:we({formats:$t,defaultWidth:"full"}),dateTime:we({formats:Qt,defaultWidth:"full"})},Vt={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},It=(e,t,n,a)=>Vt[e];function G(e){return(t,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let r;if(a==="formatting"&&e.formattingValues){const f=e.defaultFormattingWidth||e.defaultWidth,h=n!=null&&n.width?String(n.width):f;r=e.formattingValues[h]||e.formattingValues[f]}else{const f=e.defaultWidth,h=n!=null&&n.width?String(n.width):e.defaultWidth;r=e.values[h]||e.values[f]}const s=e.argumentCallback?e.argumentCallback(t):t;return r[s]}}const Bt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Kt={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ht={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Rt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},jt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xt=(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Gt={ordinalNumber:Xt,era:G({values:Bt,defaultWidth:"wide"}),quarter:G({values:zt,defaultWidth:"wide",argumentCallback:e=>e-1}),month:G({values:Kt,defaultWidth:"wide"}),day:G({values:Ht,defaultWidth:"wide"}),dayPeriod:G({values:Rt,defaultWidth:"wide",formattingValues:jt,defaultFormattingWidth:"wide"})};function U(e){return(t,n={})=>{const a=n.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=t.match(r);if(!s)return null;const f=s[0],h=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(h)?Jt(h,v=>v.test(f)):Ut(h,v=>v.test(f));let u;u=e.valueCallback?e.valueCallback(d):d,u=n.valueCallback?n.valueCallback(u):u;const k=t.slice(f.length);return{value:u,rest:k}}}function Ut(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Jt(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Zt(e){return(t,n={})=>{const a=t.match(e.matchPattern);if(!a)return null;const r=a[0],s=t.match(e.parsePattern);if(!s)return null;let f=e.valueCallback?e.valueCallback(s[0]):s[0];f=n.valueCallback?n.valueCallback(f):f;const h=t.slice(r.length);return{value:f,rest:h}}}const en=/^(\d+)(th|st|nd|rd)?/i,tn=/\d+/i,nn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},an={any:[/^b/i,/^(a|c)/i]},rn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},on={any:[/1/i,/2/i,/3/i,/4/i]},sn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ln={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},un={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mn={ordinalNumber:Zt({matchPattern:en,parsePattern:tn,valueCallback:e=>parseInt(e,10)}),era:U({matchPatterns:nn,defaultMatchWidth:"wide",parsePatterns:an,defaultParseWidth:"any"}),quarter:U({matchPatterns:rn,defaultMatchWidth:"wide",parsePatterns:on,defaultParseWidth:"any",valueCallback:e=>e+1}),month:U({matchPatterns:sn,defaultMatchWidth:"wide",parsePatterns:ln,defaultParseWidth:"any"}),day:U({matchPatterns:cn,defaultMatchWidth:"wide",parsePatterns:un,defaultParseWidth:"any"}),dayPeriod:U({matchPatterns:dn,defaultMatchWidth:"any",parsePatterns:fn,defaultParseWidth:"any"})},hn={code:"en-US",formatDistance:Nt,formatLong:Lt,formatRelative:It,localize:Gt,match:mn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gn(e){const t=F(e);return Ct(t,Wt(t))+1}function bn(e){const t=F(e),n=+de(t)-+Ot(t);return Math.round(n/Ae)+1}function Qe(e,t){var k,v,O,C,P,A,$,x;const n=F(e),a=n.getFullYear(),r=fe(),s=(x=($=(C=(O=t==null?void 0:t.firstWeekContainsDate)!=null?O:(v=(k=t==null?void 0:t.locale)==null?void 0:k.options)==null?void 0:v.firstWeekContainsDate)!=null?C:r.firstWeekContainsDate)!=null?$:(A=(P=r.locale)==null?void 0:P.options)==null?void 0:A.firstWeekContainsDate)!=null?x:1,f=W(e,0);f.setFullYear(a+1,0,s),f.setHours(0,0,0,0);const h=Z(f,t),d=W(e,0);d.setFullYear(a,0,s),d.setHours(0,0,0,0);const u=Z(d,t);return n.getTime()>=h.getTime()?a+1:n.getTime()>=u.getTime()?a:a-1}function yn(e,t){var h,d,u,k,v,O,C,P;const n=fe(),a=(P=(C=(k=(u=t==null?void 0:t.firstWeekContainsDate)!=null?u:(d=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:d.firstWeekContainsDate)!=null?k:n.firstWeekContainsDate)!=null?C:(O=(v=n.locale)==null?void 0:v.options)==null?void 0:O.firstWeekContainsDate)!=null?P:1,r=Qe(e,t),s=W(e,0);return s.setFullYear(r,0,a),s.setHours(0,0,0,0),Z(s,t)}function wn(e,t){const n=F(e),a=+Z(n,t)-+yn(n,t);return Math.round(a/Ae)+1}function b(e,t){const n=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return n+a}const N={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return b(t==="yy"?a%100:a,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):b(n+1,2)},d(e,t){return b(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return b(e.getHours()%12||12,t.length)},H(e,t){return b(e.getHours(),t.length)},m(e,t){return b(e.getMinutes(),t.length)},s(e,t){return b(e.getSeconds(),t.length)},S(e,t){const n=t.length,a=e.getMilliseconds(),r=Math.trunc(a*Math.pow(10,n-3));return b(r,t.length)}},H={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fe={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const a=e.getFullYear(),r=a>0?a:1-a;return n.ordinalNumber(r,{unit:"year"})}return N.y(e,t)},Y:function(e,t,n,a){const r=Qe(e,a),s=r>0?r:1-r;if(t==="YY"){const f=s%100;return b(f,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):b(s,t.length)},R:function(e,t){const n=$e(e);return b(n,t.length)},u:function(e,t){const n=e.getFullYear();return b(n,t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return b(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return b(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return N.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return b(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const r=wn(e,a);return t==="wo"?n.ordinalNumber(r,{unit:"week"}):b(r,t.length)},I:function(e,t,n){const a=bn(e);return t==="Io"?n.ordinalNumber(a,{unit:"week"}):b(a,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):N.d(e,t)},D:function(e,t,n){const a=gn(e);return t==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):b(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return b(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const r=e.getDay(),s=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return b(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),r=a===0?7:a;switch(t){case"i":return String(r);case"ii":return b(r,t.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let r;switch(a===12?r=H.noon:a===0?r=H.midnight:r=a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let r;switch(a>=17?r=H.evening:a>=12?r=H.afternoon:a>=4?r=H.morning:r=H.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return N.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):N.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return t==="Ko"?n.ordinalNumber(a,{unit:"hour"}):b(a,t.length)},k:function(e,t,n){let a=e.getHours();return a===0&&(a=24),t==="ko"?n.ordinalNumber(a,{unit:"hour"}):b(a,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):N.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):N.s(e,t)},S:function(e,t){return N.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return We(a);case"XXXX":case"XX":return I(a);case"XXXXX":case"XXX":default:return I(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return We(a);case"xxxx":case"xx":return I(a);case"xxxxx":case"xxx":default:return I(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ee(a,":");case"OOOO":default:return"GMT"+I(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ee(a,":");case"zzzz":default:return"GMT"+I(a,":")}},t:function(e,t,n){const a=Math.trunc(e.getTime()/1e3);return b(a,t.length)},T:function(e,t,n){const a=e.getTime();return b(a,t.length)}};function Ee(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=Math.trunc(a/60),s=a%60;return s===0?n+String(r):n+String(r)+t+b(s,2)}function We(e,t){return e%60===0?(e>0?"-":"+")+b(Math.abs(e)/60,2):I(e,t)}function I(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),r=b(Math.trunc(a/60),2),s=b(a%60,2);return n+r+t+s}const Ye=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Le=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},kn=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],r=n[2];if(!r)return Ye(e,t);let s;switch(a){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Ye(a,t)).replace("{{time}}",Le(r,t))},vn={p:Le,P:kn},pn=/^D+$/,Dn=/^Y+$/,qn=["D","DD","YY","YYYY"];function xn(e){return pn.test(e)}function Mn(e){return Dn.test(e)}function Pn(e,t,n){const a=Sn(e,t,n);if(console.warn(a),qn.includes(e))throw new RangeError(a)}function Sn(e,t,n){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const _n=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Tn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cn=/^'([^]*?)'?$/,On=/''/g,Fn=/[a-zA-Z]/;function En(e,t,n){var k,v,O,C,P,A,$,x,Q,te,ne,ae,re,R,B,j,ie,L;const a=fe(),r=(v=(k=n==null?void 0:n.locale)!=null?k:a.locale)!=null?v:hn,s=(te=(Q=(A=(P=n==null?void 0:n.firstWeekContainsDate)!=null?P:(C=(O=n==null?void 0:n.locale)==null?void 0:O.options)==null?void 0:C.firstWeekContainsDate)!=null?A:a.firstWeekContainsDate)!=null?Q:(x=($=a.locale)==null?void 0:$.options)==null?void 0:x.firstWeekContainsDate)!=null?te:1,f=(L=(ie=(R=(re=n==null?void 0:n.weekStartsOn)!=null?re:(ae=(ne=n==null?void 0:n.locale)==null?void 0:ne.options)==null?void 0:ae.weekStartsOn)!=null?R:a.weekStartsOn)!=null?ie:(j=(B=a.locale)==null?void 0:B.options)==null?void 0:j.weekStartsOn)!=null?L:0,h=F(e);if(!Et(h))throw new RangeError("Invalid time value");let d=t.match(Tn).map(T=>{const M=T[0];if(M==="p"||M==="P"){const X=vn[M];return X(T,r.formatLong)}return T}).join("").match(_n).map(T=>{if(T==="''")return{isToken:!1,value:"'"};const M=T[0];if(M==="'")return{isToken:!1,value:Wn(T)};if(Fe[M])return{isToken:!0,value:T};if(M.match(Fn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return{isToken:!1,value:T}});r.localize.preprocessor&&(d=r.localize.preprocessor(h,d));const u={firstWeekContainsDate:s,weekStartsOn:f,locale:r};return d.map(T=>{if(!T.isToken)return T.value;const M=T.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Mn(M)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&xn(M))&&Pn(M,t,String(e));const X=Fe[M[0]];return X(h,M,r.localize,u)}).join("")}function Wn(e){const t=e.match(Cn);return t?t[1].replace(On,"'"):e}const Yn=nt({name:"AddMaintenancePlan",components:{HeaderActions:ht,GeneralTable:ft},data(){return{delaySearch:300,timeoutSearch:null,btnAction:{show:!0,btnTitle:"Guardar",iconName:"o_save",btnWidth:"auto",loader:!1,tooltip:"Agregar plan de mantenimientos",btnAction:this.createOrEdit},btnCloseWindow:{iconName:"exit_to_app",btnBackground:"#FF990020",btnColor:"#FF9900",btnAction:this.goBack},form:{id:null,planName:"",observations:"",createdAt:this.getCreatedAt(),userId:"",equipmentIds:[],hasFrequency:!1,maintenanceFrequency:null,maintenanceDates:[]},filter:J(""),filterRef:J(null),options:["Mensual","Bimestral","Trimestral","Semestral","Anual"],columns:[{name:"categoryName",required:!0,label:"Equipo",align:"left",field:"categoryName",sortable:!0},{name:"equipmentModel",label:"Modelo",field:"equipmentModel",align:"left",sortable:!0},{name:"location",label:"Ubicaci\xF3n",field:"location",align:"left",sortable:!0},{name:"serialNumber",label:"No. serie",field:"serialNumber",align:"center",sortable:!0}],localCategories:[],rules:at}},created(){this.getCategories()},computed:{categories(){return this.$store.getters["equipments/getCategoriesGetter"]},rows(){let e=[];return this.localCategories.forEach(t=>{if(t.children&&t.children.length>0){const n=t.children.filter(a=>this.form.equipmentIds.includes(a.id));e.push(...n)}}),e},dateItems(){var e;return((e=this.form.maintenanceDates)==null?void 0:e.length)>=1&&this.form.maintenanceFrequency?this.calculateRemainingDates(this.form.maintenanceDates[0],this.form.maintenanceFrequency):this.form.maintenanceDates},sortedDates(){var e,t,n;return((t=(e=this.form)==null?void 0:e.maintenanceDates)==null?void 0:t.length)>=1?[...this.form.maintenanceDates].sort((s,f)=>new Date(s)-new Date(f)):((n=this.form.maintenanceDates)==null?void 0:n.lenght)==0?[]:this.form.maintenanceDates}},watch:{"form.maintenanceDates":{handler(e,t){e&&e!=t&&(this.form.maintenanceDates=Array.isArray(e)?e:[e])},immediate:!0},dateItems:{handler(e){var t,n;(e==null?void 0:e.length)!=1&&(e==null?void 0:e.toString())!=((n=(t=this.form)==null?void 0:t.maintenanceDates)==null?void 0:n.toString())&&(this.form.maintenanceDates=e)},deep:!0},"form.hasFrequency"(e){e||(this.form.maintenanceFrequency=null)}},methods:{async createMaintenancePlan(){this.btnAction.loader=!0;try{await this.$store.dispatch("maintenancePlans/postMaintenancePlanAction",this.form)===!0?(Se(this.$q,{title:"\xC9xito al crear el plan",msg:"El plan de mantenimientos se ha agregado"}),this.$router.go(-1)):se(this.$q,{msg:"Int\xE9ntalo de nuevo m\xE1s tarde y si el error persiste, rep\xF3rtalo"}),this.btnAction.loader=!1}catch{this.btnAction.loader=!1}},async getMaintenancePlan(){try{const e={id:this.$route.params.id};this.form={...this.form,...await this.$store.dispatch("maintenancePlans/getMaintenancePlanAction",e)}}catch(e){console.log(e)}},async editMaintenancePlan(){this.btnAction.loader=!0;try{this.form.id=this.$route.params.id,await this.$store.dispatch("maintenancePlans/updateMaintenancePlanAction",this.form)===!0?(Se(this.$q,{title:"\xC9xito al editar el plan de mantenimientos",msg:"El plan de mantenimientos se ha actualizado"}),this.$router.go(-1)):se(this.$q,{msg:"Int\xE9ntalo de nuevo m\xE1s tarde y si el error persiste, rep\xF3rtalo"}),this.btnAction.loader=!1}catch{this.btnAction.loader=!1}},async createOrEdit(){this.$refs.myForm.validate().then(e=>{if(e&&this.validatePayload())this.isEditing()?this.editMaintenancePlan():this.createMaintenancePlan();else return!1})},async getCategories(){var e;try{await this.$store.dispatch("equipments/getCategoriesAction"),this.localCategories=JSON.parse(JSON.stringify(this.categories)),this.isEditing()&&(await this.getMaintenancePlan(),this.form&&((e=this.form)==null?void 0:e.equipments)&&this.form.equipments.forEach(t=>{let n=this.localCategories.find(a=>t.id===a.id);n?n.children=t.children:this.localCategories.unshift(t)}))}catch(t){console.log(t)}},async getEquipmentsByCategory({key:e,node:t,done:n}){try{const a=[...t.children,...await this.$store.dispatch("equipments/getEquipmentsByCategoryAction",{categoryId:e})];a.length>0?n(a):n([])}catch(a){console.log(a)}},getTitle(){return this.isEditing()?"Editar plan":"Nuevo plan"},getCreatedAt(){return this.isEditing()?"":this.$store.getters["global/getDate"]},isEditing(){return!!this.$route.params.id},calcDate(e){const t=new Date(e);t.setDate(t.getDate()+1);const n={weekday:"long",day:"numeric",month:"long",year:"numeric"};return t.toLocaleDateString("es-MX",n)},calculateRemainingDates(e,t){const n=[new Date(e)];n[0].setDate(n[0].getDate()+1);const r=new Date().getFullYear()+2;let s;switch(t){case"Mensual":s=12;break;case"Bimestral":s=6;break;case"Trimestral":s=4;break;case"Semestral":s=2;break;case"Anual":s=1;break;default:return console.error("Frecuencia no soportada"),[]}function f(d){const u=d.getDay();return u===0?d.setDate(d.getDate()+1):u===6&&d.setDate(d.getDate()+2),d}for(let d=1;d<s*2;d++){const u=St(n[d-1],12/s);f(u),u.getFullYear()<=r&&!n.some(k=>k.getTime()===u.getTime())&&n.push(u)}return n.map(d=>En(d,"yyyy-MM-dd"))},filterEquipments(e,t){const n=t.toLowerCase();if(n==="")return!0;const a=n.normalize("NFD").replace(/[\u0300-\u036f]/g,""),r=new RegExp(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"i"),s=e.label.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return r.test(s)},resetFilter(){var e,t;this.filter&&(this.filter="",(t=(e=this.filterRef)==null?void 0:e.value)==null||t.focus())},goBack(){this.$router.go(-1)},deleteDate(e){const t=this.form.maintenanceDates.indexOf(e);t!==-1&&this.form.maintenanceDates.splice(t,1)},setCalendarTo(e){const t=new Date(e);t.setDate(t.getDate()+1),this.$refs.myDatePicker.setCalendarTo(t.getFullYear(),t.getMonth()+1)},validatePayload(){return this.validateEquipments()&&this.validateDates()},validateDates(){let e=this.form.maintenanceDates.length>0;return e||se(this.$q,{title:"M\xEDnimo debe contener una fecha",msg:"El plan de mantenimientos al menos debe de contener una fecha"}),e},validateEquipments(){let e=this.form.equipmentIds.length>0;return e||se(this.$q,{title:"M\xEDnimo debe de incluir un equipo",msg:"El plan de mantenimientos al menos debe de incluir un equipo"}),e}}}),ee=e=>(ut("data-v-573b24f7"),e=e(),dt(),e),Nn={class:"main-container-page main-container-page-medium-dark container-form"},An=ee(()=>w("div",{class:"form__item-label text-weight-medium q-mb-lg q-pa-md border-rounded",style:{"background-color":"#008cff2b"}}," 1-. Elige un nombre para el plan y los equipos que desees incluir ",-1)),$n=ee(()=>w("div",{class:"col q-pr-md form__item-label text-weight-medium"}," Nombre del plan* ",-1)),Qn={class:"row",style:{gap:"20px"}},Ln={class:"col-12 col-sm-5 col-md-4 border-line q-pa-sm border-rounded bg-accent"},Vn={class:"col-12 col-sm container-table-plans"},In=ee(()=>w("div",{class:"form__item-label text-weight-medium q-my-lg q-pa-md border-rounded",style:{"background-color":"#008cff2b"}}," 2-. Selecciona las fechas de los mantenimientos ",-1)),Bn={class:"row",style:{gap:"20px"}},zn={class:"col-sm-auto col-12"},Kn={class:"row q-mb-md",style:{"max-width":"418px"}},Hn=ee(()=>w("div",{style:{"font-size":"12px"},class:"text-primary q-pb-sm"},[w("span",{style:{"font-size":"16px","font-weight":"500"}},"\xBFCu\xE1ndo activar la frecuencia?"),w("ul",null,[w("li",null,[w("div",{style:{"margin-left":"5px"}},"Activar frecuencia si quieres calcular autom\xE1ticamente las fechas de mantenimiento a partir de una fecha inicial en un periodo de 2 a\xF1os.")]),w("li",null,[w("div",{style:{"margin-left":"5px"}},"No activar frecuencia si solo deseas agregar fechas personalizadas. ")])])],-1)),Rn={class:"col-auto"},jn={key:0,class:"col"},Xn={class:"col-sm col-12"},Gn={key:0,class:"form__item-label text-weight-medium"},Un=["onClick"],Jn={class:"row"},Zn={class:"col"},ea={class:"col-auto"},ta={style:{"font-size":"10px"},class:"text-primary q-px-sm"},na=ee(()=>w("div",{class:"form__item-label text-weight-medium q-my-lg q-pa-md border-rounded",style:{"background-color":"#008cff2b"}}," 3-. Agrega algunas observaciones ",-1)),aa={class:"w-100"};function ra(e,t,n,a,r,s){const f=_e("header-actions"),h=_e("general-table");return V(),be(gt,{class:"flex flex-center cursor-pointer non-selectable"},{default:E(()=>[_(xt,{ref:"myForm",class:"card-page"},{default:E(()=>[_(f,{titlePage:e.getTitle(),"btn-action":e.btnAction,"btn-close-window":e.btnCloseWindow},null,8,["titlePage","btn-action","btn-close-window"]),w("div",Nn,[_(wt,{class:"q-pa-md q-pa-lg-lg h-97","thumb-style":e.$store.getters["global/getThumbStyle"]},{default:E(()=>{var d;return[An,$n,_(qe,{modelValue:e.form.planName,"onUpdate:modelValue":t[0]||(t[0]=u=>e.form.planName=u),borderless:"",dense:"","hide-hint":"","hide-bottom-space":"",rules:[e.rules.requiredString,e.rules.maxLength(50)],class:"form__input bg-accent q-mb-lg"},null,8,["modelValue","rules"]),w("div",Qn,[w("div",Ln,[_(qe,{ref:"filterRef",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=u=>e.filter=u),borderless:"",dense:"",class:"form__input q-input-equipments",label:"Filtrar por categor\xEDa"},{append:E(()=>[e.filter!==""?(V(),be(ue,{key:0,name:"clear",class:"cursor-pointer",onClick:e.resetFilter},null,8,["onClick"])):le("",!0)]),_:1},8,["modelValue"]),_(Pt,{style:{"max-height":"400px",overflow:"scroll"},ticked:e.form.equipmentIds,"onUpdate:ticked":t[2]||(t[2]=u=>e.form.equipmentIds=u),class:"font-tree q-pa-xs","no-transition":"",nodes:e.localCategories,"tick-strategy":"leaf","node-key":"id","no-nodes-label":"No hay equipos para mostrar","label-key":"label",filter:e.filter,"filter-method":e.filterEquipments,onLazyLoad:e.getEquipmentsByCategory},null,8,["ticked","nodes","filter","filter-method","onLazyLoad"])]),w("div",Vn,[_(h,{class:"w-100",style:{height:"auto"},rows:e.rows,columns:e.columns,paginationProp:{rowsPerPage:null},"show-pagination":!1},null,8,["rows","columns"])])]),In,w("div",Bn,[w("div",zn,[w("div",Kn,[Hn,w("div",Rn,[_(Ne,{size:"sm",modelValue:e.form.hasFrequency,"onUpdate:modelValue":t[3]||(t[3]=u=>e.form.hasFrequency=u),label:"Frecuencia",class:"form__checkbox q-mr-md q-pa-sm border-rounded",dense:""},null,8,["modelValue"])]),e.form.hasFrequency?(V(),ce("div",jn,[_(Dt,{modelValue:e.form.maintenanceFrequency,"onUpdate:modelValue":t[4]||(t[4]=u=>e.form.maintenanceFrequency=u),options:e.options,dense:"","hide-hint":"",disable:!e.form.hasFrequency,"hide-bottom-space":"","bottom-slots":"","stack-label":"",class:"form__select bg-accent",borderless:""},{option:E(u=>[_(kt,rt(u.itemProps,{dense:""}),{default:E(()=>[_(vt,null,{default:E(()=>[_(pt,{class:it(u.selected?"primary":"text-grey")},{default:E(()=>[ot(ye(u.label),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","disable"])])):le("",!0)]),_(Te,{ref:"myDatePicker",modelValue:e.form.maintenanceDates,"onUpdate:modelValue":t[5]||(t[5]=u=>e.form.maintenanceDates=u),mask:"YYYY-MM-DD",class:"text-blue-blue-grey-4 border-line border-rounded w-100 lt-md form__date_container",multiple:!e.form.hasFrequency},null,8,["modelValue","multiple"]),_(Te,{ref:"myDatePicker",modelValue:e.form.maintenanceDates,"onUpdate:modelValue":t[6]||(t[6]=u=>e.form.maintenanceDates=u),mask:"YYYY-MM-DD",class:"text-blue-blue-grey-4 border-line border-rounded not-show-in-mobile form__date_container",multiple:!e.form.hasFrequency,landscape:""},null,8,["modelValue","multiple"])]),w("div",Xn,[((d=e.sortedDates)==null?void 0:d.length)>0?(V(),ce("div",Gn," Lista de fechas agendadas ")):le("",!0),(V(!0),ce(lt,null,st(e.sortedDates,(u,k)=>(V(),ce("div",{key:k},[w("div",{class:"chip-date border-rounded q-mt-sm q-pa-xs q-px-sm",onClick:v=>e.setCalendarTo(u)},[w("div",Jn,[w("div",Zn,ye(e.calcDate(u)),1),w("div",ea,[e.form.maintenanceFrequency?le("",!0):(V(),be(ct,{key:0,onClick:v=>e.deleteDate(u),size:"xs",class:"avatar-item"},{default:E(()=>[_(ue,{name:"close"})]),_:2},1032,["onClick"]))])])],8,Un),w("div",ta,ye(k==0?"Primer d\xEDa de mantenimientos":""),1)]))),128))])]),w("div",null,[na,w("div",aa,[_(qt,{modelValue:e.form.observations,"onUpdate:modelValue":t[7]||(t[7]=u=>e.form.observations=u),placeholder:"Escribe aqu\xED las notas del plan de mantenimientos",class:"form__textarea bg-accent border-rounded",toolbar:[[{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4"]},"bold","italic","strike","underline"],["unordered","ordered"]]},null,8,["modelValue","toolbar"])])])]}),_:1},8,["thumb-style"])])]),_:1},512)]),_:1})}var wa=tt(Yn,[["render",ra],["__scopeId","data-v-573b24f7"]]);export{wa as default};

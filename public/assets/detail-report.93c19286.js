import{h as d}from"./QItem.87f7eb07.js";import{H as p,Q as m}from"./HeaderActions.f25c2299.js";import{D as h}from"./DetailsComponent.aca30dcb.js";import{_ as u,d as f,aW as g,a as r,o as b,c as y,w as n,e as i,f as s}from"./index.650196fd.js";import"./BtnAction.b0c7cc86.js";import"./QInput.d6ff27b1.js";import"./QSpinnerPie.7f041fe1.js";import"./QChip.f7831cda.js";const _=f({name:"EquipmentsPage",components:{HeaderActions:p,DetailsComponent:h},data(){return{loading:!0,fields:{createdAt:"",extras:[{key:"showBtn",model:""}],top:[],left:[{key:"categoryName",label:"Categor\xEDa del equipo",model:""},{key:"equipmentModel",label:"Modelo del equipo",model:""},{key:"userName",label:"Encargado",model:""},{key:"reason",label:"Motivo",model:""},{key:"reportUrgency",label:"Prioridad",model:""},{key:"reportStatus",label:"Estatus",type:"status",model:"",color:""}],textareas:[{type:"textarea",key:"report",label:"Observaciones del reporte",model:""}],right:[{key:"serialNumber",label:"N\xFAmero de serie del equipo",model:""},{key:"photo",model:""}]},btnActions:[{show:!1,btnTitle:"Cancelar reporte",iconName:"cancel",tooltip:"Cancelar reporte",btnWidth:"auto",btnAction:this.cancelReport,loader:!1},{show:!1,btnTitle:"Atender reporte",iconName:"o_engineering",tooltip:"Atender reporte",btnWidth:"auto",btnAction:this.goToMaintenance,loader:!1}],btnCloseWindow:{iconName:"exit_to_app",btnBackground:"#FF990020",btnColor:"#FF9900",btnAction:this.goBack}}},methods:{async cancelReport(){try{this.btnActions[0].loader=!0;const e={id:this.$route.params.id};await this.$store.dispatch("reports/cancelReportAction",e),this.btnActions[0].loader=!1,g(this.$q,{title:"\xC9xito al cancelar el reporte",msg:"El reporte se ha cancelado"}),this.goBack()}catch(e){this.btnActions[0].loader=!1,console.log(e)}},async goToMaintenance(){this.$store.commit("equipments/MUTATE_EQUIPMENT",null),this.$router.push({name:"add-maintenance"})},getModelValueByKey(e){for(const o in this.fields)if(Object.prototype.hasOwnProperty.call(this.fields,o)){const t=this.fields[o];if(t&&typeof t[Symbol.iterator]=="function"){for(const a of t)if(a.key===e)return a.model}}},goBack(){this.$router.go(-1)},async getReport(){try{const e={id:this.$route.params.id,fields:this.fields};await this.$store.dispatch("reports/getReportAction",e),this.btnActions[0].show=!!this.getModelValueByKey("showBtn"),this.getModelValueByKey("reportStatus")==="Pendiente"&&this.userRole!=3&&(this.btnActions[1].show=!0),this.loading=!1}catch(e){console.log(e),this.loading=!1}}},computed:{userRole:{get(){return this.$store.getters["users/getRoleGetter"]}}},created(){this.getReport()}}),k={class:"card-page"},w={class:"main-container-page main-container-page-dark container-form"};function A(e,o,t,a,$,B){const l=r("header-actions"),c=r("details-component");return b(),y(m,{class:"flex flex-center cursor-pointer non-selectable"},{default:n(()=>[i("div",k,[s(l,{titlePage:"Detalles de reporte","btn-actions":e.btnActions,"btn-close-window":e.btnCloseWindow},null,8,["btn-actions","btn-close-window"]),i("div",w,[s(d,{class:"h-97","thumb-style":e.$store.getters["global/getThumbStyle"]},{default:n(()=>[s(c,{fields:e.fields,loading:e.loading},null,8,["fields","loading"])]),_:1},8,["thumb-style"])])])]),_:1})}var E=u(_,[["render",A],["__scopeId","data-v-424a8eae"]]);export{E as default};
